<div class="grid-outer blog-grid-outer">
  <div class="grid blog-listing">
    {%- liquid
      assign blog_articles = articles
      assign article_limit = 9
      assign pages = blog_articles | size | divided_by: article_limit | plus: 1
      assign show_date = true
      assign show_comments = false
      assign show_tags = true
      assign show_author = true
      assign aspect_ratio = 2
      assign show_button = true
    -%}
    {%- for article in blog_articles -%}
      {%- liquid
        assign page_number = forloop.index0 | divided_by: article_limit | plus: 1
        assign animation_order = animation_order | plus: 1
        if forloop.index > eager_images_limit
          assign loading = 'lazy'
        endif
      -%}
      {%- capture tags -%}
        {%- if article.tags.size > 0 and show_tags -%}
          <div class="article__tags">
            {%- for tag in article.tags limit: 3 -%}
              <a href="{{ blog.url }}/tagged/{{ tag | handle }}" title="{{ blog.title }} tagged {{ tag | escape }}" class="article__tag">{{ tag }}</a>
            {%- endfor -%}
          </div>
        {%- endif -%}
      {%- endcapture -%}
      <article class="article grid-item page-{{ page_number }} custom-pagination-article 2-2" onclick="location.href='{{ article.url }}'">
        <div class="article__link_image_text_wrapper">
          {%- if article.image -%}
            <div class="article__image__outer">
              <div class="article__image">
                <a class="article__image-link" href="{{ article.url }}" aria-label="{{ article.title | strip_html | escape }}">
                  {%- capture sizes -%}
                    (min-width: 990px) calc((100vw - 100px) / 3), (min-width: 750px) calc((100vw - 60px) / 3), calc(100vw - 32px)
                  {%- endcapture -%}
                  {%- capture attributes -%}
                    data-aos="img-in"
                    data-aos-anchor="{{ animation_anchor }}"
                    data-aos-order="{{ animation_order }}"
                    data-aos-duration="{{ animation_duration }}"
                    data-aos-easing="ease-out-quart"
                  {%- endcapture -%}
                  {%- render 'image' image: article.image, widths: '250, 280, 360, 480, 560, 640, 720, 840, 960, 1280, 1440, 1600, 1840, 2100, 2400', sizes: sizes, aspect_ratio: aspect_ratio, loading: loading, attributes: attributes, show_backfill: true -%}
                </a>
                {{ tags }}
              </div>
            </div>
          {%- else -%}
            {{ tags }}
          {%- endif -%}
          <div class="article__text-wrapper"
            data-aos="hero"
            data-aos-anchor="{{ animation_anchor }}"
            data-aos-order="{{ animation_order }}"
            data-aos-duration="{{ animation_duration }}">
            <p class="article__meta">
              {%- if show_date -%}
                {%- assign published_at = article.published_at | date: format: 'full_date' -%}
                <time datetime="{{ published_at }}">{{ published_at }}</time> 
              {%- endif -%}
            </p>
            <h2 class="article__title {{ title_size_class }}">
              <a href="{{ article.url }}" title="{{ article.title | strip_html | escape }}">
                {{ article.title }}
              </a>
            </h2>
            {%- if show_date or show_author or show_comments -%}
              <p class="article__meta">
                {%- if show_comments and article.comments_count > 0 -%}
                  <span class="comment-count">{{ 'blogs.comments.comments_with_count' | t: count: article.comments_count }}</span>
                {%- endif -%}
              </p>
            {%- endif -%}
            <p class="article__excerpt">{{ article.excerpt_or_content | strip_html | truncatewords: 30 }}</p>
            {% if article.metafields.custom.author_name.value != blank %}
              <p class="article__meta__author cstm__metafieldtxt">Written By: {{ article.metafields.custom.author_name.value }}</p>
            {% endif %}
            {% if article.metafields.custom.reviewed_by_author.value != blank %}
              <p class="article__meta__reviewer cstm__metafieldtxt">Reviewed By: {{ article.metafields.custom.reviewed_by_author.value }}</p>
            {% endif %}
            {%- if show_button -%}
              <div class="article__link">
                <a href="{{ article.url }}" class="btn btn--text" aria-label="{{ 'blogs.article.read_more' | t }}">
                  <span>{{ 'blogs.article.read_more' | t }} - {{ article.metafields.custom.minute_read_time }} min</span>
                </a>
              </div>
            {%- endif -%}
          </div>
        </div>
      </article>
    {%- endfor -%}
  </div>
  {% if pages > 1 %}
    <nav class="pagination-custom cpagination" data-current-page="1" data-total-page="{{ pages }}">
      <a class="pagination-custom__prev" href="javascript: void(0)" title="{{ 'general.pagination.prev' | t }}">
        <span>{{ 'general.pagination.prev' | t }}</span>
        <svg enable-background="new 0 0 15 26" height="26px" id="Layer_1" version="1.1" viewBox="0 0 15 26" width="15px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon fill="#231F20" points="12.885,0.58 14.969,2.664 4.133,13.5 14.969,24.336 12.885,26.42 2.049,15.584 -0.035,13.5 "/></svg>
      </a>
  
      <div class="pagination-custom__inner">
        {%- for i in (1..pages) -%}
            <a href="javascript: void(0)" class="pagination-custom__page {% if i == 1 %} active {% endif %} p{{ i }}" >{{ i }}</a>
        {%- endfor -%}
      </div>
  
      <a class="pagination-custom__next" href="javascript: void(0)" title="{{ 'general.pagination.next' | t }}">
        <span>{{ 'general.pagination.next' | t }}</span>
        <svg enable-background="new 0 0 15 26" height="26px" id="Layer_1" version="1.1" viewBox="0 0 15 26" width="15px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon fill="#231F20" points="2.019,0.58 -0.035,2.634 10.646,13.316 -0.035,23.997 2.019,26.052 14.755,13.316 "/></svg>
      </a>
    </nav>
  {% endif %}
</div>