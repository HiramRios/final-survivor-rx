<!-- /sections/article.liquid -->

{%- liquid
  assign article_url = article.url
  assign show_sidebar = false
  if section.blocks.size > 0
    assign show_sidebar = true
  endif

  assign show_date = section.settings.show_date
  assign show_author = section.settings.show_author
  assign show_author_review = section.settings.show_author_review
  assign show_read_time = section.settings.show_read_time
  assign bg_color = section.settings.bg_color
  assign header_color = settings.menu_transparent_color
  assign transparent = false

  if bg_color == 'rgba(0,0,0,0)' or bg_color == blank
    assign transparent = true
  endif
-%}

{%- if header_color == bg_color or settings.bg_color == header_color and transparent -%}
  {%- style -%}
    body:has([data-header-transparent]):has(.main-content > .shopify-section.section-overlay-header:first-of-type) .header__wrapper {
      --text-transparent: var(--COLOR-MENU-LINK);
      --text-transparent-hover: var(--COLOR-MENU-LINK-HOVER);
    }

    /* Fallback for browsers that don't support :has() selector */
    body.has-header-transparent.has-first-section-overlay-header .header__wrapper {
      --text-transparent: var(--COLOR-MENU-LINK);
      --text-transparent-hover: var(--COLOR-MENU-LINK-HOVER);
    }
  {%- endstyle -%}
{%- endif -%}

{%- capture style -%}
  --PT: {{ section.settings.padding_top }}px;
  --PB: {{ section.settings.padding_bottom }}px;

  {%- unless bg_color == 'rgba(0,0,0,0)' or bg_color == blank -%}
    --bg: {{ bg_color }};
  {%- else -%}
    --bg: transparent;
  {%- endunless -%}
{%- endcapture -%}

<section
  class="{% if section.settings.custom_class != blank %}{{ section.settings.custom_class }} {% endif %} article-single section-padding"
  data-section-id="{{ section.id }}"
  data-section-type="article"
  style="{{ style }}">
  <div class="article__hero text-center">
    <div class="wrapper custom_article_wrapper">
      <div class="custom_article_title_outer">
        <div class="wrapper custom_article_title_wrapper">
            {%- if show_date -%}
              {%- assign published_at = article.published_at | date: format: 'full_date' -%}
              <time datetime="{{ published_at }}" class="article-time">{{ published_at }}</time>
            {%- endif -%}
            <h2 class="article__title h3">{{ article.title }}</h2>
            <div class="article__meta">
              {%- if show_author -%}
                <p class="article__meta__author article_header_author cstm__metafieldtxt">Written By: {{ article.metafields.custom.author_name.value }}</p>
              {%- endif -%}
              {% if show_author_review %}
                {% if article.metafields.custom.reviewed_by_author.value != blank %}
                  <p class="cstmreview--jtpl">
                    Medically Reviewed By: {{ article.metafields.custom.reviewed_by_author.value }}
                  </p>
                {% endif %}
              {% endif %}
              {% if show_read_time %}
                {% if article.metafields.custom.minute_read_time != blank %}
                    <p class="minread__cstm--jtpl">{{ article.metafields.custom.minute_read_time }} min</p>
                {% endif %}
              {% endif %}
              <a href="{{ blog.url }}" class="article-blog">{{ blog.title }}</a>
            </div>
        </div>
      </div>
      {%- if section.settings.show_image and article.image -%}
        <div class="article__image {{ section.settings.height }} {{ section.settings.mobile_height }}">
          {%- render 'image-hero', image: article.image, sizes: '(min-width: 750px) 50vw, calc(100vw - 32px)', desktop_height: section.settings.height, mobile_height: section.settings.mobile_height, show_backfill: false -%}
        </div>
      {%- endif -%}
          {%- if false -%}
        <div class="custom_socila_share_wrapper mobile_only">
        <span class="custom_share_heading">Share:</span>
          <div class="custom_socila_share_wrapper_inner">
         <div class="custom_linkcopy_share">
           {%- assign share_url = article.url | prepend: request.origin -%}
           <share-button class="share-holder">
          <button type="button" class="sharing-button1" data-share-button data-share-url="{{ share_url }}">
           <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32" fill="none"><g clip-path="url(#clip0_227_3292)"><path d="M17.6725 8.08511L19.0475 6.71011C19.5887 6.1688 20.2312 5.7394 20.9383 5.44644C21.6455 5.15347 22.4034 5.00269 23.1688 5.00269C23.9342 5.00269 24.6921 5.15347 25.3993 5.44644C26.1064 5.7394 26.7489 6.1688 27.29 6.71011C27.8313 7.25126 28.2607 7.89375 28.5537 8.60089C28.8467 9.30802 28.9975 10.0659 28.9975 10.8314C28.9975 11.5968 28.8467 12.3547 28.5537 13.0618C28.2607 13.769 27.8313 14.4115 27.29 14.9526L24.2425 18.0001L22.95 19.2926C22.4083 19.8345 21.7649 20.2642 21.0569 20.5572C20.3489 20.8502 19.59 21.0007 18.8237 21.0001C18.0575 20.9996 17.2988 20.8479 16.5913 20.5538C15.8837 20.2598 15.241 19.829 14.7 19.2864C14.1401 18.7266 13.7005 18.0583 13.4081 17.3226C13.1158 16.5868 12.9769 15.799 13 15.0076" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.3275 23.9149L12.9525 25.2899C12.4107 25.8318 11.7674 26.2615 11.0593 26.5545C10.3513 26.8475 9.59244 26.998 8.82618 26.9975C8.05992 26.9969 7.30128 26.8452 6.59369 26.5511C5.8861 26.2571 5.24344 25.8264 4.70248 25.2837C3.61246 24.1899 3.00104 22.7082 3.00244 21.164C3.00385 19.6198 3.61797 18.1393 4.70998 17.0474L9.04998 12.7074C9.59113 12.1661 10.2336 11.7367 10.9408 11.4438C11.6479 11.1508 12.4058 11 13.1712 11C13.9366 11 14.6946 11.1508 15.4017 11.4438C16.1088 11.7367 16.7513 12.1661 17.2925 12.7074C17.8547 13.2671 18.2963 13.9361 18.59 14.6731C18.8837 15.4101 19.0232 16.1994 19 16.9924" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="clip0_227_3292"><rect width="32" height="32" fill="white"/></clipPath></defs></svg>
            
            <span class="sharing-button__text">
              {% comment %}<span>{{ 'general.share.share' | t }}</span>{% endcomment %}
            </span>
          </button>
            </share-button>
         </div>
      <div class="custom_facebook_share">
                 <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://survivor-rx.myshopify.com/{{ article.url }}">
               <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32" fill="none"><g clip-path="url(#clip0_227_3255)"><path d="M16 28C22.6274 28 28 22.6274 28 16C28 9.37258 22.6274 4 16 4C9.37258 4 4 9.37258 4 16C4 22.6274 9.37258 28 16 28Z" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M21 11H19C18.2044 11 17.4413 11.3161 16.8787 11.8787C16.3161 12.4413 16 13.2044 16 14V28" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 18H20" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="clip0_227_3255"><rect width="32" height="32" fill="white"/></clipPath></defs></svg>
             </a>
        </div>
         <div class="custom_mailto_share">
        <a href="mailto:?body=https://survivor-rx.myshopify.com/{{ article.url }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32" fill="none"><g clip-path="url(#clip0_227_3296)"><path d="M4 7H28V24C28 24.2652 27.8946 24.5196 27.7071 24.7071C27.5196 24.8946 27.2652 25 27 25H5C4.73478 25 4.48043 24.8946 4.29289 24.7071C4.10536 24.5196 4 24.2652 4 24V7Z" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M28 7L16 18L4 7" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="clip0_227_3296"><rect width="32" height="32" fill="white"/></clipPath></defs></svg>
        </a>
         </div>
        <div class="custom_twiitter_share">
          <a target="_blank"  href="https://twitter.com/intent/tweet?text=https://survivor-rx.myshopify.com/{{ article.url }}">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 32 32" fill="none"><g clip-path="url(#clip0_227_3300)"><path d="M6 5H12L26 27H20L6 5Z" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.235 17.9412L6 26.9999" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M25.9999 5L17.7649 14.0588" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="clip0_227_3300"><rect width="32" height="32" fill="white"/></clipPath></defs></svg>
           </a>
        </div>
          </div>
        </div>
      {%- endif -%}  
    </div>
  </div>
 
  <div class="wrapper article__wrapper custom_narrow-wrapper has_sharing">
    <div class="grid{% if show_sidebar %} grid--article{% else %} grid--1{% endif %}">
      <article class="article article--single">
        <div class="article__content__wrapper">
          <div class="article__content rte">
            {{ article.content }}
          </div>
        </div>

        {%- if article.user.bio and show_author -%}
          <div class="hr"></div>

          <div class="article__author-bio">
            {%- if article.user.image != blank -%}
              <div class="article__author__image">
                {%- render 'image' image: article.user.image -%}
              </div>
            {%- endif -%}

            <div class="article__author__text">
              <h3>{{ article.user.first_name }} {{ article.user.last_name }}</h3>

              <p class="rte">{{ article.user.bio | newline_to_br }}</p>
            </div>
          </div>
        {%- endif -%}

       

       

        {%- if section.settings.arrows -%}
          {%- if blog.next_article or blog.previous_article -%}
            <div class="hr"></div>

            <aside class="clearfix">
              {%- if blog.next_article -%}
                <small class="right">
                  {%- for post in blog.articles -%}
                    {%- if post.url == blog.next_article -%}
                      <a href="{{ post.url }}" class="btn btn--text btn--text-no-underline btn--small" title="{{ post.title | strip_html | escape }}">
                        <span>{{ 'blogs.article.newer_post' | t }}</span>

                        {%- render 'icon-arrow-right' -%}
                      </a>
                    {%- endif -%}
                  {%- endfor -%}
                </small>
              {%- endif -%}

              {%- if blog.previous_article -%}
                <small class="left">
                  {%- for post in blog.articles -%}
                    {%- if post.url == blog.previous_article -%}
                      <a href="{{ post.url }}" class="btn btn--text btn--text-no-underline btn--small" title="{{ post.title | strip_html | escape }}">
                        {%- render 'icon-arrow-left' -%}

                        <span>{{ 'blogs.article.older_post' | t }}</span>
                      </a>
                    {%- endif -%}
                  {%- endfor -%}
                </small>
              {%- endif -%}
            </aside>
          {%- endif -%}
        {%- endif -%}
      </article>
      <!-- end article -->

      {%- if show_sidebar -%}
        <aside class="sidebar">
          <div class="sidebar__contents">
            {%- for block in section.blocks -%}
              {%- case block.type -%}
                {%- when '@app' -%}
                  {%- render block -%}
                {%- when 'links' -%}
                  <div class="widget widget--categories" {{ block.shopify_attributes }}>
                    {%- if block.settings.blog_linklist != blank -%}
                      <collapsible-elements>
                        {%- assign list_html = '' -%}

                        {%- for link in linklists[block.settings.blog_linklist].links -%}
                          {%- assign current_blog = link.object -%}
                          {%- assign open_submenu = false -%}
                          {%- assign current_blog_articles = '' -%}

                          {%- capture list_html -%}
                            {{ list_html }}

                            {%- if current_blog.articles.size > 0 -%}
                              {%- for article in current_blog.articles limit: 5 -%}
                                {%- if article_url == article.url and open_submenu == false -%}
                                  {%- assign open_submenu = true -%}
                                {%- endif -%}

                                {%- capture current_blog_articles -%}
                                  {{ current_blog_articles }}

                                  <li>
                                    <a href="{{ article.url }}"
                                      title="{{ article.title | strip_html | escape }}"
                                      class="widget__link">{{ article.title }}</a>
                                  </li>
                                {%- endcapture -%}
                              {%- endfor -%}
                            {%- endif -%}

                            <li
                              data-slide="{{ forloop.index0 }}"
                              data-slide-index="{{ forloop.index0 }}"
                            >
                              {% if current_blog_articles != '' %}
                                <details class="widget__link" data-collapsible{% if open_submenu %} open="true"{% endif %}>
                                  <summary class="widget__accordion-title" data-collapsible-trigger>
                                    {{- link.title -}}

                                    {%- render 'icon-plus' -%}
                                    {%- render 'icon-minus' -%}
                                  </summary>

                                  <div data-collapsible-body{% if open_submenu %} style="height: auto;"{% endif %}>
                                    <div class="submenu" data-collapsible-content>
                                      {{ current_blog_articles }}

                                      {% comment %}
                                        If blog posts are more than 5 then show 'See more...' link
                                      {% endcomment %}
                                      {%- if current_blog.articles.size > 5 -%}
                                        <li>
                                          <a href="{{ link.url }}"
                                            title="{{ link.title | strip_html | escape }}"
                                            class="widget__link">{{ 'blogs.sidebar.see_more' | t }}</a>
                                        </li>
                                      {%- endif -%}
                                    </div>
                                  </div>
                                </details>
                              {%- else -%}
                                <a href="{{ link.url }}" title="{{ link.title | strip_html | escape }}" class="widget__link">
                                  {{- link.title -}}
                                </a>
                              {%- endif -%}
                            </li>
                          {%- endcapture -%}
                        {%- endfor -%}

                        {%- if list_html != '' -%}
                          {%- if block.settings.title != blank -%}
                            <h3 class="widget__title">{{ block.settings.title }}</h3>
                          {%- endif -%}

                            <ul class="widget__links widget__links--primary">
                              {{ list_html }}
                            </ul>
                          {%- endif -%}
                        {%- elsif blog.all_tags.size > 0 -%}
                          {%- if block.settings.title != blank -%}
                            <h3 class="widget__title">{{ block.settings.title }}</h3>
                          {%- endif -%}

                        <ul class="widget__links widget__links--primary">
                          {%- for tag in blog.all_tags -%}
                            <li {% if article.tags contains tag %}class="widget__links--active" {% endif %} data-slide="{{ forloop.index0 }}" data-slide-index="{{ forloop.index0 }}">
                              <a class="widget__link" href="{{ blog.url }}/tagged/{{ tag | handle }}">{{ tag }}</a>
                            </li>
                          {%- endfor -%}
                        </ul>
                      </collapsible-elements>
                    {%- endif -%}
                  </div>

                {%- when 'related' -%}
                  {% comment %}
                    Extract product handles from links in article content
                  {% endcomment %}
                  {%- assign article_content = article.content | split: '/products/' -%}

                  {%- if article_content.size > 0 -%}
                    {%- assign starts_with_handle = '' -%}

                    {%- for item in article_content -%}
                      {% comment %}
                        The first item is empty, subsequent items start with a product handle
                        Split on URL encoded string to handle params
                      {% endcomment %}
                      {%- unless forloop.index0 == 0 -%}
                        {%- assign starts_with_handle = item | url_encode | split: '%' -%}
                        {%- assign handles = handles | append: starts_with_handle[0] | append: ',' -%}
                      {%- endunless -%}
                    {%- endfor -%}
                  {%- endif -%}

                  {%- assign handles_arr = handles | split: ',' | compact | uniq -%}

                  <div class="widget" {{ block.shopify_attributes }}>
                    {%- if handles_arr.size > 0 -%}
                      {%- if block.settings.title != blank -%}
                        <h3 class="widget__title">{{ block.settings.title }}</h3>
                      {%- endif -%}

                      <div class="widget__products">
                        {%- for handle in handles_arr limit: 20 -%}
                          {%- assign product = all_products[handle] -%}

                          {%- if product.id != '' -%}
                            {%- render 'product-column-item', product: product -%}
                          {%- endif -%}
                        {%- endfor -%}
                      </div>
                    {%- endif -%}
                  </div>
                {%- when 'recent' -%}
                  {%- liquid
                    assign counter = 0
                    assign article_limit = 3
                    assign recent_articles = ''
                  -%}

                  {%- for recent_article in blog.articles -%}
                    {%- if recent_article.handle == article.handle -%}
                      {%- continue -%}
                    {%- endif -%}

                    {%- capture recent_markup -%}
                      <article class="article">
                        {%- if recent_article.image != blank -%}
                          <div class="article__image__outer">
                            <div class="article__image">
                              <a class="article__image-link" href="{{ recent_article.url }}" aria-label="{{ recent_article.title | strip_html | escape }}">
                                {%- render 'image' image: recent_article.image, widths: '320, 480, 560, 640, 780, 960, 1280, 1440, 1960', sizes: '(min-width: 750px) 320px, calc(100vw - 32px)' -%}
                              </a>
                            </div>
                          </div>
                        {%- endif -%}

                        <div class="article__text-wrapper">
                          <h2 class="article__title heading-size-4">
                            <a href="{{ recent_article.url }}" title="{{ recent_article.title | strip_html | escape }}">
                              {{ recent_article.title }}
                            </a>
                          </h2>

                          {%- if show_date or show_author -%}
                            <p class="article__meta">
                              {%- if show_date -%}
                                {%- assign published_at = recent_article.published_at | date: format: 'full_date' -%}
                                <time datetime="{{ published_at }}">{{ published_at }}</time>
                              {%- elsif show_author -%}
                                <span class="article__meta__author">{{ 'blogs.article.by_author' | t: author: article.author }} </span>
                              
                              {%- endif -%}
                            </p>
                          {%- endif -%}
                        </div>
                      </article>
                    {%- endcapture -%}

                    {%- assign recent_articles = recent_articles | append: recent_markup -%}
                    {%- assign counter = counter | plus: 1 -%}

                    {%- if counter == article_limit -%}
                      {%- break -%}
                    {%- endif -%}
                  {%- endfor -%}

                  <div class="widget" {{ block.shopify_attributes }}>
                    {%- if recent_articles != '' -%}
                      {%- if block.settings.title != blank -%}
                        <h3 class="widget__title">{{ block.settings.title }}</h3>
                      {%- endif -%}

                      <div class="widget__recent">
                        {{ recent_articles }}
                      </div>
                    {%- endif -%}
                  </div>
                {%- when 'image' -%}
                  {%- if article.image -%}
                    <div class="widget widget--image" {{ block.shopify_attributes }}>
                      {%- if block.settings.title != blank -%}
                        <h3 class="widget__title">{{ block.settings.title }}</h3>
                      {%- endif -%}

                      <div class="widget__image">
                        {%- render 'image' image: article.image, widths: '320, 480, 560, 640, 780, 960, 1280, 1440, 1960', sizes: '(min-width: 750px) 320px, calc(100vw - 32px)' -%}
                      </div>
                    </div>
                  {%- endif -%}
              {%- endcase -%}
            {%- endfor -%}
          </div>
        </aside>
        <!-- end sidebar -->
      {%- endif -%}
    </div>
    
        {%- if section.settings.show_sharing -%}
          <div class="custom_socila_share_wrapper desktop_only blog-sharing">
          <span class="custom_share_heading">Share:</span>
            <div class="custom_socila_share_wrapper_inner">
            <div class="custom_linkcopy_share">
              {%- assign share_url = article.url | prepend: request.origin -%}
                <share-button class="share-holder">
                  <a class="sharing-button" data-share-button data-share-url="{{ share_url }}" href="javascript:void(0)">
                    {{ "copy_link.svg" | asset_url | img_tag: "linkcopy share" }}
                    
                    <span class="sharing-button__text">
                      {% comment %}<span>{{ 'general.share.share' | t }}</span>{% endcomment %}
                    </span>
                  </a>
                
                  <div class="share-button__message{% if align == 'right' %} share-button__message--right{% endif %}" data-share-message>
                    <span class="share-button__message-text" role="status" data-share-message-text>{{ 'general.share.success_message' | t }}</span>
                  </div>
                </share-button>
            </div>
            <div class="custom_facebook_share">
                  <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://survivor-rx.myshopify.com/{{ article.url }}">
                    {{ "custom-facebook-icon.png" | asset_url | img_tag: "facebook share" }}
              </a>
          </div>
          <div class="custom_linkedin_share">
            <a target="_blank"  href="http://www.linkedin.com/shareArticle?mini=true&url={{ article.url }}">
              {{ "custom-linkedin-icon.png" | asset_url | img_tag: "linkedin share" }}
            </a>
          </div>
          <div class="custom_mailto_share">
            <a href="mailto:?body=https://survivor-rx.myshopify.com/{{ article.url }}">
              {{ "custom-mail-icon.svg" | asset_url | img_tag: "email share" }}
            </a>
          </div>
          <!-- <div class="custom_twiitter_share">
            <a target="_blank"  href="https://twitter.com/intent/tweet?text=https://survivor-rx.myshopify.com/{{ article.url }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none"><g clip-path="url(#clip0_227_3300)"><path d="M6 5H12L26 27H20L6 5Z" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.235 17.9412L6 26.9999" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M25.9999 5L17.7649 14.0588" stroke="#333333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="clip0_227_3300"><rect width="32" height="32" fill="white"/></clipPath></defs></svg>
            </a>
          </div> -->
            </div>
          </div>
        {%- endif -%}

    {%- if blog.comments_enabled? -%}
      <div class="grid{% if show_sidebar %} grid--article{% else %} grid--1{% endif %}">
        <div class="comments-container">
          <!-- /partials/article-comments.liquid -->

{% paginate article.comments by 5 %}
  {% if article.comments_count > 0 %}
    <div class="comments" id="comments">
      <div class="hr"></div>
      {% assign number_of_comments = article.comments_count %}
      <h3>{{ 'blogs.comments.comments_with_count' | t: count: number_of_comments }}</h3>
      <div class="hr"></div>
      <!-- a "just published" comment -->
      {% if comment and comment.created_at %}
        <div id="comment-{{ comment.id }}" class="comment">
          <div class="comment-body">
            <div class="comment-meta">
              {% assign comment_date = comment.created_at | date: format: 'full_date' %}
              <span class="author">{{ comment.author }}</span>
              <span class="label"><time datetime="{{ comment_date }}">{{ comment_date }}</time></span>
            </div>
            {{ comment.content }}
          </div>
        </div>
      {% endif %}
      <!-- previous comments -->
      {% for comment in article.comments %}
        <div id="comment-{{ comment.id }}" class="comment">
          <div class="comment-body">
            <div class="comment-meta">
              {% assign comment_date = comment.created_at | date: format: 'full_date' %}
              <span class="author">{{ comment.author }}</span>
              <span class="label"><time datetime="{{ comment_date }}">{{ comment_date }}</time></span>
            </div>
            {{ comment.content }}
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% if paginate.pages > 1 %}
    <div class="paginate">
      {% if paginate.previous %}
          <span class="left">{{ '&larr;' | link_to: paginate.previous.url }}</span>
      {% endif %}
      {% for part in paginate.parts %}
        {% if part.is_link %}
          <span class="num">{{ part.title | link_to: part.url }}</span>
        {% else %}
          <span class="num current">{{ part.title }}</span>
        {% endif %}
      {% endfor %}
      {% if paginate.next %}
        <span class="right">{{ '&rarr;' | link_to: paginate.next.url }}</span>
      {% endif %}
    </div>
    <div class="hr"></div>
  {% endif %}

  <div class="comments-form">
    <div class="hr"></div>
    <h3>{{ 'blogs.comments.title' | t }}</h3>
    <div class="hr"></div>
    {% form article %}
      {% if form.posted_successfully? %}
          {% if blog.moderated? %}
              <p class="flash"><i>{{ 'blogs.comments.success_moderated' | t }}</i></p>
          {% else %}
              <p class="flash"><i>{{ 'blogs.comments.success' | t }}</i></p>
          {% endif %}
      {% endif %}
      {% if form.errors %}
          <p class="error">{{ 'general.forms.post_error' | t }}</p>
      {% endif %}
      <div class="form-row">
        <div class="form-field">
          <label for="comment_author">{{ 'blogs.comments.name' | t }}</label>
          <input type="text" id="comment_author" name="comment[author]" value="{{ form.author }}" placeholder="{{ 'blogs.comments.name' | t }}">
        </div>
        <div class="form-field">
          <label for="comment_email">{{ 'blogs.comments.email' | t }}</label>
          <input type="text" id="comment_email" name="comment[email]" value="{{ form.email }}" placeholder="{{ 'blogs.comments.email' | t }}">
        </div>
      </div>
      <div class="form-field">
        <label for="comment_body">{{ 'blogs.comments.comment' | t }}</label>
        <textarea id="comment_body" name="comment[body]" rows="5" placeholder="{{ 'blogs.comments.comment' | t }}" >{{ form.body }}</textarea>
      </div>

      <div class="form-field">
        <div class="form__legal">
          {{ 'shopify.online_store.spam_detection.disclaimer_html' | t }}
        </div>
        {% if blog.moderated? %}
          <p><i>{{ 'blogs.comments.moderated' | t }}</i></p>
        {% endif %}

        <input type="submit" value="{{ 'blogs.comments.post' | t }}" id="comment-submit" class="btn btn--primary btn--solid">

        {% if form.errors %}
          <script>
            window.location.hash = '#add-comment-title';
          </script>
        {% endif %}

        {% if form.posted_successfully? %}
          <script>
            window.location.hash = '#comments';
          </script>
        {% endif %}

      </div>
    {% endform %}
  </div>
{% endpaginate %}

        </div>
      </div>
      <!-- end comments -->
    {%- endif -%}
  </div>
</section>

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "articleBody": {{ article.content | strip_html | json }},
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": {{ shop.url | append: page.url | json }}
    },
    "headline": {{ article.title | json }},
    {% if article.excerpt != blank %}
      "description": {{ article.excerpt | strip_html | json }},
    {% endif %}
    {% if article.image %}
      "image": [
        {{ article | image_url: article.image.width | prepend: "https:" | json }}
      ],
    {% endif %}
    "datePublished": {{ article.published_at | date: '%Y-%m-%dT%H:%M:%SZ' | json }},
    "dateCreated": {{ article.created_at | date: '%Y-%m-%dT%H:%M:%SZ' | json }},
    "author": {
      "@type": "Person",
      "name": {{ article.author | json }}
    },
    "publisher": {
      "@type": "Organization",
      "name": {{ shop.name | json }}
    }
  }
</script>

{% schema %}
  {
    "name": "Article page",
    "class": "section-overlay-header",
    "settings": [
      {
        "type": "text",
        "id": "custom_class",
        "label": "Custom Class",
      "info": "This is used only for the backend purpose.Please don't change it."
      },
      {
        "type": "header",
        "content": "Hero"
      },
      {
        "type": "checkbox",
        "id": "show_image",
        "label": "Show image",
        "default": true
      },
      {
        "type": "select",
        "id": "height",
        "label": "Desktop height",
        "default": "screen-height-one-third",
        "options": [
          { "value": "image-height", "label": "Image height" },
          { "value": "screen-height-full", "label": "Full screen height"},
          { "value": "screen-height-three-quarters", "label": "3/4 of screen"},
          { "value": "screen-height-two-thirds", "label": "2/3 of screen"},
          { "value": "screen-height-one-half", "label": "1/2 of screen"},
          { "value": "screen-height-one-third", "label": "1/3 of screen"},
          { "value": "seven-fifty-height-hero", "label": "750px" },
          { "value": "sixty-fifty-height-hero", "label": "650px" },
          { "value": "five-fifty-height-hero ", "label": "550px" },
          { "value": "four-fifty-height-hero", "label": "450px" }
        ]
      },
      {
        "type": "select",
        "id": "mobile_height",
        "label": "Mobile height",
        "default": "screen-height-one-third--mobile",
        "options": [
          { "value": "image-height--mobile", "label": "Image height" },
          { "value": "screen-height-full--mobile", "label": "Full screen height"},
          { "value": "screen-height-three-quarters--mobile", "label": "3/4 of screen"},
          { "value": "screen-height-two-thirds--mobile", "label": "2/3 of screen"},
          { "value": "screen-height-one-half--mobile", "label": "1/2 of screen"},
          { "value": "screen-height-one-third--mobile", "label": "1/3 of screen"},
          { "value": "seven-fifty-height-hero--mobile", "label": "750px" },
          { "value": "sixty-fifty-height-hero--mobile", "label": "650px" },
          { "value": "five-fifty-height-hero--mobile", "label": "550px" },
          { "value": "four-fifty-height-hero--mobile", "label": "450px" }
        ]
      },
      {
        "type": "color",
        "id": "bg_color",
        "label": "Background"
      },
      {
        "type": "header",
        "content": "Article"
      },
      {
        "type": "checkbox",
        "id": "show_date",
        "label": "Show date",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "show_author",
        "label": "Show author",
        "default": true
      },
       {
        "type": "checkbox",
        "id": "show_author_review",
        "label": "Show author review",
        "default": true
      },
       {
        "type": "checkbox",
        "id": "show_read_time",
        "label": "Show read time",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "tags",
        "label": "Show article tags",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "show_sharing",
        "label": "Show sharing button",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "arrows",
        "label": "Show navigation arrows",
        "default": false
      },
      {
        "type": "header",
        "content": "Section padding"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "Padding top",
        "default": 0
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "Padding bottom",
        "default": 50
      }
    ],
    "blocks": [
      {
        "type": "@app"
      },
      {
        "type": "links",
        "name": "Navigation",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Heading",
            "default": "Categories"
          },
          {
            "type": "link_list",
            "id": "blog_linklist",
            "label": "Custom navigation",
            "info": "Overrides tag navigation"
          }
        ]
      },
      {
        "type": "related",
        "name": "Related products",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Heading",
            "default": "Related products",
            "info": "Products linked in the article body appear as Related products"
          }
        ]
      },
      {
        "type": "recent",
        "name": "Recent articles",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Heading",
            "default": "Recent articles"
          }
        ]
      },
      {
        "type": "image",
        "name": "Default image",
        "limit": 1,
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Heading"
          }
        ]
      }
    ]
  }
{% endschema %}
